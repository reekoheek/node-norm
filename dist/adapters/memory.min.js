!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([,,,,,,,,,,,,function(e,t){e.exports=class{constructor({name:e}){this.name=e,this._hasTx=!1}async begin(){this._hasTx||(await this._begin(),this._hasTx=!0)}async commit(){this._hasTx&&(await this._commit(),this._hasTx=!1)}async rollback(){this._hasTx&&(await this._rollback(),this._hasTx=!1)}_begin(){}_commit(){}_rollback(){}}},,function(e,t,r){const n=r(12),a=r(15);class o extends n{constructor(e){super(e),this.data=e.data||{}}load(e,t=(()=>{})){let r=this.data[e.schema.name]||[];const{criteria:n,sorts:a}=e;if(r=r.filter(t=>this._matchCriteria(n,t,e.schema)),a){const e=Object.keys(a);r=r.sort((t,r)=>{let n=0;return e.forEach((o,s)=>{const i=a[o],c=Math.pow(2,e.length-s-1)*i;t[o]<r[o]?n-=c:t[o]>r[o]&&(n+=c)}),n})}return e.offset<0?r:(r=e.length<0?r.slice(e.offset):r.slice(e.offset,e.offset+e.length)).map(e=>(t(e),e))}insert(e,t=(()=>{})){const r=this.data[e.schema.name]=this.data[e.schema.name]||[];return e.rows.reduce((n,o)=>{const s={id:a()};for(const t in o)s[t]=e.schema.getField(t).serialize(o[t]);return r.push(s),t(s),++n},0)}update(e){const t=Object.keys(e.sets);return this.load(e).reduce((r,n)=>{return t.filter(t=>n[t]!==e.sets[t]&&(n[t]=e.schema.getField(t).serialize(e.sets[t]),!0)).length&&r++,r},0)}drop(e){delete this.data[e.schema.name]}truncate(e){this.data[e.schema.name]=[]}delete(e){const t=this.data[e.schema.name]=this.data[e.schema.name]||[];this.load(e).forEach(e=>{const r=t.indexOf(e);r>=0&&t.splice(r,1)})}async count(e,t){const{length:r,offset:n}=e;t||(e.offset=0,e.length=-1);let a=0;return await this.load(e,()=>a++),e.offset=n,e.length=r,a}_matchCriteria(e,t,r){if(!e)return!0;for(const n in e){const a=e[n],[o,s="eq"]=n.split("!"),i=r.getField(o),c=t[o];switch(s){case"or":{let e=!1;for(const n of a){if(this._matchCriteria(n,t,r)){e=!0;break}}if(!e)return!1;break}case"and":for(const e of a)if(!this._matchCriteria(e,t,r))return!1;break;case"eq":if(0!==i.compare(a,c))return!1;break;case"ne":if(0===i.compare(a,c))return!1;break;case"gt":if(i.compare(a,c)<=0)return!1;break;case"gte":if(i.compare(a,c)<0)return!1;break;case"lt":if(i.compare(a,c)>=0)return!1;break;case"lte":if(i.compare(a,c)>0)return!1;break;case"in":if(-1===i.indexOf(a,c))return!1;break;case"nin":if(-1!==i.indexOf(a,c))return!1;break;case"like":{const e=new RegExp(a);if(!c.match(e))return!1;break}case"regex":if(!c.match(a))return!1;break;case"where":if(!a(c,t))return!1;break;default:throw new Error(`Operator '${s}' is not implemented yet!`)}}return!0}}if("undefined"!=typeof window){const e=window.norm;if(!e)throw new Error("Norm is not defined yet!");e.adapters=e.adapters||{},e.adapters.Memory=o}e.exports=o},function(e,t,r){var n=r(16),a=r(17);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var i=0;i<16;++i)t[o+i]=s[i];return t||a(s)}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,a=r;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")}}]);
//# sourceMappingURL=memory.min.js.map